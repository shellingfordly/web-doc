# 系统骨架使用文档

系统骨架基于[vue vben admin](https://github.com/anncwb/vue-vben-admin)，一个使用vue3，vite，typescript等主流技术进行开发的一个开源的中后台模版。

## 系统目录结构

### 总目录

```sh
├── build # 构建相关脚本
├── mock # 模拟数据
├── public # 静态资源
├── src # 项目代码
│   ├── api #请求相关
│   ├── assets # 静态资源
│   ├── biz # 业务代码
│   ├── components # 组件
│   ├── design  # 样式
│   ├── enums # 常量，枚举
│   ├── hooks # hooks
│   ├── logics # 逻辑相关
│   ├── layouts # 布局
│   ├── main.ts # 入口文件
│   ├── router #路由，菜单等
│   ├── locale #多语言文件
│   ├── settings # 配置文件
│   ├── plugins # 插件
│   ├── store # vuex
│   ├── utils # 工具类
│   └── views # 页面
└── types # 类型定义
```

biz目录下为主要的业务代码，系统99%的功能代码都是在这里的。其他目录主要是骨架代码，除了一些使用vuex的代码，全局组件的声明，或者有必要的修改骨架代码之外，几乎不会在biz目录之外写业务代码。

### 业务代码目录

```sh
├── biz # 业务代码
│   ├── api # 请求相关
│   ├── app # 各系统代码
│   ├── components # 组件
│   ├── data  # 数据处理
│   ├── lib # 工具、hooks等等
│   ├── setup # 组件注册
```

app目录下各个系统的代码，目前业务分为两个系统，kol系统和ocpm系统。

### 系统代码目录

```sh
├── app # 各系统代码
│   ├── common # 公共页面
│   ├── home # home页
│   ├── kol # kol系统
│   ├── login  # 登录页
│   ├── ocpm # ocpm系统
```

系统目录下又分为router和views，router写路由代码，views写页面代码。


## 注意要点

### 接口请求和数据处理

- 接口请求的代码是自动生成的，不需要手动书写，每次更新直接跑yarn api命令即可
- 由于后端是没有返回接口返回值的属性的，因此自动生成的接口并无法确定返回值的类型，因此建议在写页面代码前，先定义需求请求接口的类，这样在写页面的时候代码提示会更好，并且可以将一些数据处理封装到类中，页面只需要调用对应的方法。

### 工具

- 类似deepcopy之类的公共方法，都定义在biz\lib\utils下，如果没有，可以在此目录下增加


## 代码规范

### 页面

- 页面代码均在各个系统的views目录下，页面目录下对应的index.vue文件均使用具体的内容命令，方便定位，以及明确文件作用。
- 尽可能的使用hooks函数方式编写代码，将逻辑拆分，写在对应页面目录的hooks下
- components下为子组件，当页面的css样式过长时，可以将其抽成一个less文件，放到less目录下，减少vue文件的负担，影响vue文件的阅读体验。

### 数据

- 变量命名、接口参数统一使用驼峰形式
- props不要使用数组直接接收，使用Object定义接收属性的类型
- 适当的写上一些注释，注释要言简意赅，不要过于冗长
- hooks函数使用use开头命名，返回对象的格式


